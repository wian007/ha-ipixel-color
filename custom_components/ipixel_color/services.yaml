display_text:
  name: Display Text
  description: Display text on the iPIXEL device with custom effects and colors
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    text:
      name: Text
      description: Text to display (max 500 characters)
      required: true
      example: "Hello World"
      selector:
        text:
    effect:
      name: Effect
      description: Display effect for the text
      required: false
      default: "scroll_ltr"
      selector:
        select:
          options:
            - "fixed"
            - "scroll_rtl"
            - "scroll_ltr"
            - "blink"
            - "breeze"
            - "snow"
            - "laser"
    speed:
      name: Speed
      description: Animation speed (1-100)
      required: false
      default: 50
      selector:
        number:
          min: 1
          max: 100
          mode: slider
    color_fg:
      name: Text Color
      description: Foreground text color
      required: false
      default: [255, 255, 255]
      selector:
        color_rgb:
    color_bg:
      name: Background Color
      description: Background color
      required: false
      default: [0, 0, 0]
      selector:
        color_rgb:
    font:
      name: Font
      description: Font name for text rendering
      required: false
      default: "CUSONG"
      selector:
        select:
          options:
            - "CUSONG"
            - "SIMSUN"
            - "VCR_OSD_MONO"
    matrix_height:
      name: Matrix Height
      description: Override display height for text rendering in pixels (leave empty for auto-detect from device)
      required: false
      selector:
        number:
          min: 4
          max: 512
          mode: box
          unit_of_measurement: "px"

upload_gif:
  name: Upload GIF
  description: Upload and display a GIF animation on the iPIXEL device
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    gif_url:
      name: GIF URL
      description: URL to the GIF file to display
      required: true
      example: "https://example.com/animation.gif"
      selector:
        text:
    buffer_slot:
      name: Buffer Slot
      description: Storage slot on device (1-255)
      required: false
      default: 1
      selector:
        number:
          min: 1
          max: 255
          mode: box

add_schedule:
  name: Add Schedule
  description: Add a scheduled display item
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    name:
      name: Schedule Name
      description: Name for this schedule item
      required: true
      example: "Morning Message"
      selector:
        text:
    text:
      name: Text
      description: Text to display when triggered
      required: true
      example: "Good Morning!"
      selector:
        text:
    mode:
      name: Mode
      description: Display mode for this schedule
      required: false
      default: "textimage"
      selector:
        select:
          options:
            - "text"
            - "textimage"
            - "clock"
            - "gif"
    duration_ms:
      name: Duration
      description: How long to display this item (milliseconds)
      required: false
      default: 5000
      selector:
        number:
          min: 1000
          max: 3600000
          mode: box
          unit_of_measurement: "ms"

remove_schedule:
  name: Remove Schedule
  description: Remove a scheduled item by ID
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    schedule_id:
      name: Schedule ID
      description: ID of the schedule to remove
      required: true
      selector:
        text:

trigger_schedule:
  name: Trigger Schedule
  description: Manually trigger a schedule item (for HA automations)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    schedule_id:
      name: Schedule ID
      description: ID of the schedule to trigger
      required: true
      selector:
        text:

set_playlist:
  name: Set Playlist
  description: Set the playlist order for cycling
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    schedule_ids:
      name: Schedule IDs
      description: Comma-separated list of schedule IDs in order
      required: true
      example: "morning_msg,weather,time"
      selector:
        text:

sync_time:
  name: Sync Time
  description: Synchronize the current time to the iPIXEL device
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color

set_pixel:
  name: Set Pixel
  description: Set a single pixel color at specified coordinates
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    x:
      name: X Coordinate
      description: Horizontal position (0 to width-1)
      required: true
      example: 0
      selector:
        number:
          min: 0
          max: 127
          mode: box
    y:
      name: Y Coordinate
      description: Vertical position (0 to height-1)
      required: true
      example: 0
      selector:
        number:
          min: 0
          max: 63
          mode: box
    color:
      name: Color
      description: Hex color value (e.g., 'ff0000' for red)
      required: true
      example: "ff0000"
      selector:
        text:

set_pixels:
  name: Set Pixels
  description: Set multiple pixels at once (batch mode)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    pixels:
      name: Pixels
      description: List of pixel objects with x, y, and color properties
      required: true
      example: '[{"x": 0, "y": 0, "color": "ff0000"}, {"x": 1, "y": 0, "color": "00ff00"}]'
      selector:
        object:

clear_pixels:
  name: Clear Pixels
  description: Clear the display (blank screen without powering off)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color

show_slot:
  name: Show Slot
  description: Display content from a stored slot on the device
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    slot:
      name: Slot Number
      description: Slot number to display (0-255)
      required: true
      example: 0
      selector:
        number:
          min: 0
          max: 255
          mode: box

delete_slot:
  name: Delete Slot
  description: Delete stored content from a specific slot
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    slot:
      name: Slot Number
      description: Slot index to delete (0-255)
      required: true
      example: 0
      selector:
        number:
          min: 0
          max: 255
          mode: box

set_brightness:
  name: Set Brightness
  description: Set display brightness level directly via service
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    level:
      name: Brightness Level
      description: Brightness percentage (1-100)
      required: true
      example: 50
      selector:
        number:
          min: 1
          max: 100
          mode: slider
          unit_of_measurement: "%"

set_clock_mode:
  name: Set Clock Mode
  description: Configure and activate clock display mode
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    style:
      name: Clock Style
      description: Clock style (0-8)
      required: false
      default: 1
      selector:
        number:
          min: 0
          max: 8
          mode: box
    show_date:
      name: Show Date
      description: Display date alongside time
      required: false
      default: true
      selector:
        boolean:
    format_24:
      name: 24-Hour Format
      description: Use 24-hour time format
      required: false
      default: true
      selector:
        boolean:
    date:
      name: Date
      description: Date in DD/MM/YYYY format (defaults to today)
      required: false
      example: "25/12/2024"
      selector:
        text:

set_time:
  name: Set Time
  description: Set specific time on device (does not sync with HA time)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    hour:
      name: Hour
      description: Hour (0-23)
      required: true
      example: 12
      selector:
        number:
          min: 0
          max: 23
          mode: box
    minute:
      name: Minute
      description: Minute (0-59)
      required: true
      example: 30
      selector:
        number:
          min: 0
          max: 59
          mode: box
    second:
      name: Second
      description: Second (0-59)
      required: false
      default: 0
      selector:
        number:
          min: 0
          max: 59
          mode: box

# Enhanced Digital Signage Services

create_playlist:
  name: Create Playlist
  description: Create a new playlist for content rotation
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    name:
      name: Playlist Name
      description: Name for the new playlist
      required: true
      example: "Morning Messages"
      selector:
        text:
    loop:
      name: Loop
      description: Loop playlist when reaching end
      required: false
      default: true
      selector:
        boolean:
    shuffle:
      name: Shuffle
      description: Randomize playback order
      required: false
      default: false
      selector:
        boolean:

start_playlist:
  name: Start Playlist
  description: Start playing a playlist with per-item durations
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    playlist_id:
      name: Playlist ID
      description: ID of playlist to start (optional, uses active playlist if not specified)
      required: false
      selector:
        text:

stop_playlist:
  name: Stop Playlist
  description: Stop the currently playing playlist
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color

set_power_schedule:
  name: Set Power Schedule
  description: Configure automatic power on/off times
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    enabled:
      name: Enabled
      description: Enable power scheduling
      required: false
      default: true
      selector:
        boolean:
    on_time:
      name: Power On Time
      description: Time to turn display on (HH:MM format)
      required: false
      default: "07:00"
      example: "07:00"
      selector:
        time:
    off_time:
      name: Power Off Time
      description: Time to turn display off (HH:MM format)
      required: false
      default: "22:00"
      example: "22:00"
      selector:
        time:
    days:
      name: Days
      description: Days of week (mon, tue, wed, thu, fri, sat, sun)
      required: false
      example: '["mon", "tue", "wed", "thu", "fri"]'
      selector:
        object:

add_time_slot:
  name: Add Time Slot
  description: Schedule a playlist to play at specific times
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    name:
      name: Slot Name
      description: Name for this time slot
      required: true
      example: "Morning Shift"
      selector:
        text:
    playlist_id:
      name: Playlist ID
      description: ID of playlist to play during this slot
      required: true
      selector:
        text:
    start_time:
      name: Start Time
      description: When to start this playlist (HH:MM format)
      required: true
      example: "08:00"
      selector:
        time:
    end_time:
      name: End Time
      description: When to stop this playlist (HH:MM format)
      required: true
      example: "12:00"
      selector:
        time:
    days:
      name: Days
      description: Days of week for this slot
      required: false
      example: '["mon", "tue", "wed", "thu", "fri"]'
      selector:
        object:
    priority:
      name: Priority
      description: Higher priority slots override lower ones
      required: false
      default: 0
      selector:
        number:
          min: 0
          max: 100
          mode: box

# New features from related projects

set_upside_down:
  name: Set Upside Down
  description: Flip the display 180 degrees for inverted mounting
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    upside_down:
      name: Upside Down
      description: Enable upside down mode (flip 180Â°)
      required: true
      default: false
      selector:
        boolean:

set_default_mode:
  name: Set Default Mode
  description: Reset device to factory default display mode
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
erase_data:
  name: Erase Data
  description: Erase stored data from device EEPROM (slots/buffers)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    erase_all:
      name: Erase All
      description: Erase all stored data (ignores buffers field if true)
      required: false
      default: false
      selector:
        boolean:
    buffers:
      name: Buffers
      description: List of buffer numbers to erase (1-255), comma-separated
      required: false
      example: "1,2,3"
      selector:
        text:

set_program_mode:
  name: Set Program Mode
  description: Auto-cycle through stored screens (slideshow mode)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    buffers:
      name: Buffers
      description: List of buffer numbers to cycle through (1-9), comma-separated
      required: true
      example: "1,2,3"
      selector:
        text:

set_rhythm_mode_advanced:
  name: Set Rhythm Mode (Advanced)
  description: Set music visualizer mode with 11 frequency band level controls
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    style:
      name: Style
      description: Rhythm visualizer style (0-4)
      required: true
      default: 0
      selector:
        number:
          min: 0
          max: 4
          mode: box
    levels:
      name: Frequency Levels
      description: 11 frequency band levels (0-15 each), comma-separated
      required: true
      example: "8,8,8,8,8,8,8,8,8,8,8"
      selector:
        text:

display_image_url:
  name: Display Image URL
  description: Download and display an image from a URL (PNG, JPG, BMP, GIF)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    url:
      name: Image URL
      description: URL to the image file to display
      required: true
      example: "https://example.com/image.png"
      selector:
        text:
    buffer_slot:
      name: Buffer Slot
      description: Storage slot on device (1-255)
      required: false
      default: 1
      selector:
        number:
          min: 1
          max: 255
          mode: box

# Screen and mode control

set_screen:
  name: Set Screen
  description: Select which stored screen buffer to display (1-9)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    screen:
      name: Screen Number
      description: Screen buffer to display (1-9)
      required: true
      example: 1
      selector:
        number:
          min: 1
          max: 9
          mode: box

set_diy_mode:
  name: Set DIY Mode
  description: Control DIY mode with extended options for custom content creation
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    mode:
      name: Mode
      description: "DIY mode option: 0=Exit (keep prev), 1=Enter (clear), 2=Exit (keep current), 3=Enter (preserve)"
      required: true
      default: 1
      selector:
        select:
          options:
            - label: "Exit - Keep Previous Display"
              value: "0"
            - label: "Enter - Clear Display (Recommended)"
              value: "1"
            - label: "Exit - Keep Current Display"
              value: "2"
            - label: "Enter - Preserve Content"
              value: "3"

send_raw_command:
  name: Send Raw Command
  description: Send raw hex command to device (for expert/debugging use)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    hex_data:
      name: Hex Data
      description: Raw command as hex string (e.g., 'AABBCC' or 'AA BB CC')
      required: true
      example: "05 00 07 01 01"
      selector:
        text:

# Password management (from ipixel-ctrl protocol)

set_password:
  name: Set Password
  description: Enable or disable password protection on the device
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    enabled:
      name: Enabled
      description: Enable password protection
      required: true
      default: true
      selector:
        boolean:
    password:
      name: Password
      description: 6-digit password (e.g., '123456')
      required: true
      example: "123456"
      selector:
        text:

verify_password:
  name: Verify Password
  description: Verify password on a password-protected device (required before other commands)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    password:
      name: Password
      description: 6-digit password to verify (e.g., '123456')
      required: true
      example: "123456"
      selector:
        text:

# Mixed data command (0x0004 - combines PNG, GIF, and TEXT)

send_mix_data:
  name: Send Mixed Data
  description: Send combined PNG/GIF/TEXT data to device (advanced, partially documented protocol)
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    hex_data:
      name: Hex Data
      description: Raw mixed data blocks as hex string (block headers + content)
      required: true
      example: "8000 0000 0300 0060 1000 6400 0064 0000 <text_data>"
      selector:
        text:
          multiline: true
    screen_slot:
      name: Screen Slot
      description: Storage slot on device (1-255)
      required: false
      default: 1
      selector:
        number:
          min: 1
          max: 255
          mode: box

# Optimized pixel and image services (from go-ipxl)

set_pixels_batched:
  name: Set Pixels (Batched)
  description: Set multiple pixels using optimized batch sending, grouped by color. More efficient than set_pixels for drawing shapes or patterns.
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    pixels:
      name: Pixels
      description: List of pixel objects with x, y, and color properties. Pixels are automatically grouped by color for efficient transmission.
      required: true
      example: '[{"x": 0, "y": 0, "color": "ff0000"}, {"x": 1, "y": 0, "color": "ff0000"}, {"x": 2, "y": 0, "color": "00ff00"}]'
      selector:
        object:

display_image_raw_rgb:
  name: Display Image (Raw RGB)
  description: Display image using raw RGB protocol (camera mode). Sends pixel data directly without PNG encoding, useful for real-time streaming applications.
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    image_path:
      name: Image Path
      description: Path to the image file (PNG, JPEG, etc.)
      required: true
      example: "/config/www/images/display.png"
      selector:
        text:
    brightness:
      name: Brightness
      description: Brightness level applied to image data (1-100)
      required: false
      default: 100
      selector:
        number:
          min: 1
          max: 100
          mode: slider
          unit_of_measurement: "%"

display_image_raw_rgb_url:
  name: Display Image URL (Raw RGB)
  description: Download and display image using raw RGB protocol. Uses direct pixel data transmission for potentially faster updates.
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    url:
      name: Image URL
      description: URL to the image file (PNG, JPEG, etc.)
      required: true
      example: "https://example.com/image.png"
      selector:
        text:
    brightness:
      name: Brightness
      description: Brightness level applied to image data (1-100)
      required: false
      default: 100
      selector:
        number:
          min: 1
          max: 100
          mode: slider
          unit_of_measurement: "%"

draw_solid_color:
  name: Draw Solid Color
  description: Fill the entire display with a single color using raw RGB protocol. Faster than setting each pixel individually.
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    color:
      name: Color
      description: Hex color to fill display with (e.g., 'ff0000' for red)
      required: true
      example: "ff0000"
      selector:
        text:

draw_visuals:
  name: Draw Visuals
  description: Render multiple visual elements (text, scrolling text, images, pixels) with animation support. Based on UnexpectedMatrixPixels.
  fields:
    device_id:
      name: Device
      description: Target iPIXEL device to display text on
      required: true
      selector:
        device:
          integration: ipixel_color
    elements:
      name: Elements
      description: |
        List of visual elements to render. Each element is an object with a 'type' field and type-specific properties.

        Supported types:
        - text: Static text (content, x, y, color, font, font_size, spacing)
        - textscroll: Horizontal scrolling text (content, y, color, font, font_size, speed)
        - textlong: Word-wrapped text with vertical scroll animation (content, x, y, color, font, speed, scroll_duration, direction)
        - icon: MDI icon (icon, x, y, size, color)
        - image: Image from URL or path (source, x, y, width, height)
        - pixels: Raw pixels (data: [{x, y, color}])
      required: true
      example: |
        - type: text
          content: "Hello"
          x: 0
          y: 0
          color: "ffffff"
          font: "CUSONG"
        - type: textscroll
          content: "Scrolling message..."
          y: 8
          speed: 50
          color: "00ff00"
      selector:
        object:
    background:
      name: Background Color
      description: Background color as RGB array [r, g, b] or hex string
      required: false
      default: [0, 0, 0]
      selector:
        color_rgb:
    fps:
      name: FPS
      description: Animation frames per second (1-30). Higher values = smoother animation but more BLE traffic.
      required: false
      default: 10
      selector:
        number:
          min: 1
          max: 30
          mode: slider